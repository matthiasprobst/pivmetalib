<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera Metadata</title>
</head>
<body>
    <h1>Camera Metadata</h1>

    <!-- Dropdown to select a camera (if required) -->
    <label for="camera-dropdown">Select Camera:</label>
    <select id="camera-dropdown" onchange="fillCameraData()">
        <option value="">--Select--</option>
        {% for camera in cameras %}
            <option value="{{ camera.id }}">{{ camera.name }}</option>
        {% endfor %}
    </select>

    <!-- Form to display/edit camera data -->
    <form method="POST" action="/save_camera">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" value="">

        <label for="model">Model:</label>
        <input type="text" id="model" name="model" value="">

        <label for="sensorWidth">Sensor Width:</label>
        <input type="text" id="sensorWidth" name="sensorWidth" value="">

        <label for="sensorHeight">Sensor Height:</label>
        <input type="text" id="sensorHeight" name="sensorHeight" value="">

        <label for="pixelWidth">Pixel Width:</label>
        <input type="text" id="pixelWidth" name="pixelWidth" value="">

        <label for="pixelHeight">Pixel Height:</label>
        <input type="text" id="pixelHeight" name="pixelHeight" value="">

        <button type="submit">Save</button>
    </form>

    <script>
        const cameras = {{ cameras | tojson }};

        function fillCameraData() {
            const cameraId = document.getElementById("camera-dropdown").value;

            if (cameraId === "") {
                document.getElementById("name").value = "";
                document.getElementById("model").value = "";
                document.getElementById("sensorWidth").value = "";
                document.getElementById("sensorHeight").value = "";
                document.getElementById("pixelWidth").value = "";
                document.getElementById("pixelHeight").value = "";
            } else {
                const selectedCamera = cameras[cameraId];
                document.getElementById("name").value = selectedCamera.name;
                document.getElementById("model").value = selectedCamera.model;
                document.getElementById("sensorWidth").value = selectedCamera.sensorWidth;
                document.getElementById("sensorHeight").value = selectedCamera.sensorHeight;
                document.getElementById("pixelWidth").value = selectedCamera.pixelWidth;
                document.getElementById("pixelHeight").value = selectedCamera.pixelHeight;
            }
        }
    </script>
</body>
</html>
